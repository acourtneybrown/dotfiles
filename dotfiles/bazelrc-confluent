import {{@@ env['HOME'] @@}}/.cc-dotfiles.bazelrc

common --local_cpu_resources=HOST_CPUS*0.7

build:buildgrid --spawn_strategy=remote
build:buildgrid --remote_executor=grpc://buildgrid.nonprod-bazel-remote-cache.confluent.io:50051
build:buildgrid --remote_instance_name=main

# from https://docs.engflow.com/re/client/bazel-first-time.html#3-set-up-bazelrc
build:engflow --define=EXECUTOR=remote
build:engflow --disk_cache=
build:engflow --experimental_inmemory_dotd_files
build:engflow --experimental_inmemory_jdeps_files
build:engflow --incompatible_strict_action_env=true
build:engflow --remote_timeout=600
build:engflow --nolegacy_important_outputs
build:engflow --grpc_keepalive_time=30s
build:engflow --host_platform=//engflow_config/config:platform
build:engflow --platforms=//engflow_config/config:platform
build:engflow --extra_execution_platforms=//engflow_config/config:platform

# TODO: determine right one here
build:engflow --java_runtime_version=remotejdk_11

build:engflow --remote_cache=grpcs://engflow.confluent.io
build:engflow --remote_executor=grpcs://engflow.confluent.io
build:engflow --bes_backend=grpcs://engflow.confluent.io
build:engflow --bes_results_url=https://engflow.confluent.io/invocation/
# build:engflow --tls_certificate=<PATH>/engflow-remote-execution/engflow-ca.crt

build:buildgrid-local --spawn_strategy=remote
build:buildgrid-local --remote_executor=http://localhost:8080
build:buildgrid-local --remote_instance_name=main

build:buildbarn-local --jobs=8
build:buildbarn-local --remote_executor=grpc://localhost:8980
build:buildbarn-local --remote_instance_name=local
